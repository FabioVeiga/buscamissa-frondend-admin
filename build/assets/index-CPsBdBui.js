import{r as l,j as e}from"./react-B5uZ1pqB.js";import{c as De}from"./react-dom-CFh3N_J4.js";import{B as Ee}from"./react-router-dom-D4WZoLZQ.js";import{a as Ae}from"./axios-BtuGy7By.js";import{P as M}from"./prop-types-8qyjUrwk.js";import{A as Ne,C as Re,B as I,T as S,a as j,b as A,D as We,H as Me,c as Te,L as K,d as F,e as Z,f as ke,g as Q,h as ze,i as we,G as ee,j as re,k as oe,l as P,F as V,I as G,S as J,M as R,m as Le,n as Be,o as _,p as O,q as Fe,r as Oe,s as $e,t as le,P as de,u as ce,v as ue,w as he,x as B,y as m,z as xe,E as me,O as Ue,J as qe,K as He,N as Qe,Q as Ve,R as Ge,U as Je,V as ne}from"./@mui-BJar8ERE.js";import{u as $,N as ge,a as Ke,b as _e,c as L}from"./react-router-BcXzeK4J.js";import"./hoist-non-react-statics-VTAvmUN5.js";import"./scheduler-BNqrtbQi.js";import"./@remix-run-BIrGyY9Z.js";import"./clsx-B-dksMZM.js";import"./@emotion-C0n4EN6X.js";import"./@babel-B4YMtfbM.js";import"./stylis-DDa9OTMq.js";import"./react-transition-group-CPiaEFTO.js";import"./@popperjs-CMBiYTiD.js";import"./react-is-60rj3oqD.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const h of n)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&d(g)}).observe(document,{childList:!0,subtree:!0});function a(n){const h={};return n.integrity&&(h.integrity=n.integrity),n.referrerPolicy&&(h.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?h.credentials="include":n.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function d(n){if(n.ep)return;n.ep=!0;const h=a(n);fetch(n.href,h)}})();const T=Ae.create({baseURL:"https://busca-missa-api-dev.azurewebsites.net",timeout:1e4,headers:{"Content-Type":"application/json"}}),ie=t=>{t?T.defaults.headers.common.Authorization=`Bearer ${t}`:delete T.defaults.headers.common.Authorization},pe=l.createContext(),Xe=({children:t})=>{const[o,a]=l.useState(!1),[d,n]=l.useState(null),[h,g]=l.useState(null);l.useEffect(()=>{const v=localStorage.getItem("token");v&&ie(v)},[]);const i=async(v,f)=>{var x;try{const p=await T.post("/api/Usuario/autenticar",{email:v,senha:f});p.status===200&&(n(p.data.data.usuario),a(!0),localStorage.setItem("token",p.data.data.usuario.acessToken.token),ie(p.data.data.usuario.acessToken.token))}catch(p){(x=p.response.data.data)!=null&&x.mensagemTela?g(p.response.data.data):g(p.response.data.errors),a(!1)}},c=()=>{n(null),a(!1),localStorage.removeItem("token")};return l.useEffect(()=>{const v=localStorage.getItem("user");v&&(n(JSON.parse(v)),a(!0))},[]),l.useEffect(()=>{o?localStorage.setItem("user",JSON.stringify(d)):(localStorage.removeItem("user"),localStorage.removeItem("token"))},[o,d]),e.jsx(pe.Provider,{value:{isAuthenticated:o,user:d,login:i,logout:c,error:h},children:t})},X=()=>{const t=l.useContext(pe);if(!t)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return t},k=({errorMessage:t,severity:o,field:a=null})=>{let d="";return a!==null?d=`${a}: ${t}`:d=t,e.jsx(Ne,{severity:o,children:d})};k.propTypes={errorMessage:M.oneOfType([M.string,M.shape({errorMessage:M.string})]).isRequired,severity:M.oneOfType([M.string,M.shape({severity:M.string})]).isRequired};class je extends l.Component{constructor(o){super(o),this.state={hasError:!1}}static getDerivedStateFromError(o){return{hasError:!0}}componentDidCatch(o,a){console.error("ErrorBoundary caught an error",o,a)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"red"},children:[e.jsx("h1",{children:"Algo deu errado."}),e.jsx("p",{children:"Tente recarregar a página ou entre em contato com o suporte."}),e.jsx("a",{href:"/",children:"voltar"})]}):this.props.children}}je.propTypes={children:M.node.isRequired};const Ye=()=>{var v,f;const[t,o]=l.useState(""),[a,d]=l.useState(""),n=$(),{login:h,isAuthenticated:g,error:i}=X(),c=async x=>{x.preventDefault(),await h(t,a),g&&n("/Home")};return e.jsx(je,{children:e.jsx(Re,{maxWidth:"sm",children:e.jsxs(I,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",children:[e.jsx(S,{variant:"h4",component:"h1",gutterBottom:!0,children:"Login"}),e.jsxs(I,{component:"form",width:"100%",noValidate:!0,children:[e.jsx(j,{label:"Email",variant:"outlined",fullWidth:!0,margin:"normal",value:t,onChange:x=>o(x.target.value),required:!0}),e.jsx(j,{label:"Senha",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",value:a,onChange:x=>d(x.target.value),required:!0}),i&&e.jsx(k,{errorMessage:i==null?void 0:i.mensagemTela,severity:"error"}),i&&((v=i==null?void 0:i.Email)==null?void 0:v.map(x=>e.jsx(k,{errorMessage:x,severity:"error"}))),i&&((f=i==null?void 0:i.Senha)==null?void 0:f.map(x=>e.jsx(k,{errorMessage:x,severity:"error"}))),e.jsx(A,{variant:"contained",color:"primary",fullWidth:!0,onClick:c,style:{marginTop:"16px"},children:"Logar"})]})]})})})},Y=()=>{const t=$(),{logout:o}=X(),a=()=>{o()},d=n=>{t(n)};return e.jsx(We,{variant:"permanent",sx:{width:250,flexShrink:0,"& .MuiDrawer-paper":{width:250,boxSizing:"border-box",position:"relative"}},children:e.jsxs("div",{children:[e.jsx(A,{sx:{margin:2},startIcon:e.jsx(Me,{}),onClick:()=>d("/home"),children:"Home"}),e.jsx(Te,{}),e.jsxs(K,{children:[e.jsxs(F,{button:!0,onClick:()=>d("/usuario"),children:[e.jsx(Z,{children:e.jsx(ke,{})}),e.jsx(Q,{primary:"Usuário"})]}),e.jsxs(F,{button:!0,onClick:()=>d("/igreja"),children:[e.jsx(Z,{children:e.jsx(ze,{})}),e.jsx(Q,{primary:"Igreja"})]}),e.jsxs(F,{button:!0,onClick:a,children:[e.jsx(Z,{children:e.jsx(we,{})}),e.jsx(Q,{primary:"Deslogar"})]})]})]})})},Ze=()=>{const{isAuthenticated:t}=X(),[o,a]=l.useState({quantidadesIgrejas:0,quantidadeMissas:0});return l.useEffect(()=>{T.get("/api/admin/igreja/infos").then(d=>{a(d.data.data)}).catch(d=>{console.error("Error fetching data:",d)})},[]),t?e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Y,{}),e.jsxs(ee,{container:!0,spacing:2,style:{padding:"20px"},children:[e.jsx(ee,{item:!0,xs:12,sm:6,children:e.jsx(re,{elevation:3,children:e.jsxs(oe,{children:[e.jsx(S,{variant:"h5",gutterBottom:!0,children:"Quantidade de Igrejas"}),e.jsx(S,{variant:"h4",color:"primary",children:o.quantidadesIgrejas})]})})}),e.jsx(ee,{item:!0,xs:12,sm:6,children:e.jsx(re,{elevation:3,children:e.jsxs(oe,{children:[e.jsx(S,{variant:"h5",gutterBottom:!0,children:"Quantidade de Missas"}),e.jsx(S,{variant:"h4",color:"secondary",children:o.quantidadeMissas})]})})})]})]}):e.jsx(ge,{to:"/"})},fe=({pageIndex:t,pageSize:o,totalItems:a,hasPreviousPage:d,hasNextPage:n,nextPage:h,previousPage:g,totalPages:i})=>e.jsxs(I,{display:"flex",justifyContent:"center",alignItems:"center",sx:{marginTop:2},children:[e.jsx(A,{onClick:()=>console.log("Ir para a página anterior"),disabled:!d,variant:"contained",sx:{marginRight:2},children:"Anterior"}),e.jsxs(S,{sx:{marginRight:2},children:["Página ",t," de ",i]}),e.jsx(A,{onClick:()=>console.log("Ir para a próxima página"),disabled:!n,variant:"contained",children:"Próxima"})]}),ve=t=>["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"][t],ae=[{value:0,label:"Domingo"},{value:1,label:"Segunda-feira"},{value:2,label:"Terça-feira"},{value:3,label:"Quarta-feira"},{value:4,label:"Quinta-feira"},{value:5,label:"Sexta-feira"},{value:6,label:"Sábado"}],ea=["ac","al","ap","am","ba","ce","df","es","go","ma","mt","ms","mg","pa","pb","pr","pe","pi","rj","rn","rs","ro","rr","sc","sp","se","to"],aa=t=>/^\d{5}-?\d{3}$/.test(t),ta=({onDataChange:t,onLoadingChange:o,onPaginationChange:a})=>{const d=$(),n=r=>{d(r)},h=()=>({mensagem:"",severity:"",show:!1}),[g,i]=l.useState(h),[c,v]=l.useState({uf:"",localidade:"",nome:"",diaSemana:"",horario:"",ativo:!0}),[f,x]=l.useState([]),p=()=>x([]),z=r=>{x(E=>E.includes(r)?E:[...E,r])},D=(r,E)=>{v(N=>({...N,[r]:E}))},w=()=>{o&&o(!0);let r=`/api/igreja/buscar-por-filtro?uf=${c.uf}`;c.localidade!==""&&(r+=`&localidade=${c.localidade}`),c.nome!==""&&(r+=`&nome=${c.nome}`),c.diaSemana!==""&&(r+=`&diadasemana=${c.diaSemana}`),c.horario!==""&&(r+=`&horario=${c.horario}`),c.ativo!==""&&(r+=`&ativo=${c.ativo}`),r+="&Paginacao.PageIndex=1&Paginacao.PageSize=10",c.localidade===""&&p(),T.get(r).then(N=>{const b=N.data.data;t&&t(b),b.items.forEach(U=>{z(U.endereco.localidade)});const y={pageIndex:b.pageIndex,pageSize:b.pageSize,totalItems:b.totalItems,hasPreviousPage:b.hasPreviousPage,hasNextPage:b.hasNextPage,nextPage:b.nextPage,previousPage:b.previousPage,totalPages:b.totalPages};a&&a(y),i({})}).catch(N=>{var b,y;console.error("Error fetching data:",N),N.status===400&&i({mensagem:(y=(b=N.response)==null?void 0:b.data)==null?void 0:y.errors.Uf,severity:"error",show:!0}),t&&t([])}).finally(()=>{o&&o(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(I,{component:"form",display:"flex",flexDirection:"column",gap:2,sx:{margin:"0 auto",padding:2,border:"1px solid #ccc",borderRadius:2,width:"100%",boxSizing:"border-box"},children:e.jsxs(P,{container:!0,spacing:2,children:[e.jsx(P,{size:1,children:e.jsxs(V,{fullWidth:!0,children:[e.jsx(G,{id:"uf-label",children:"UF"}),e.jsx(J,{labelId:"uf-label",value:c.uf,onChange:r=>D("uf",r.target.value),children:ea.map(r=>e.jsx(R,{value:r,children:r.toUpperCase()},r))})]})}),e.jsx(P,{size:5,children:e.jsxs(V,{fullWidth:!0,children:[e.jsx(G,{id:"localidade-label",children:"Localidade"}),e.jsxs(J,{labelId:"localidade-label",value:c.localidade,onChange:r=>D("localidade",r.target.value),children:[e.jsx(R,{value:"",children:e.jsx("em",{children:"Selecione uma localidade"})}),(f==null?void 0:f.length)>0&&f.map(r=>e.jsx(R,{value:r,children:r},r))]})]})}),e.jsx(P,{size:6,children:e.jsx(j,{label:"Nome",value:c.nome,onChange:r=>D("nome",r.target.value),fullWidth:!0})}),e.jsx(P,{size:4,children:e.jsxs(V,{fullWidth:!0,children:[e.jsx(G,{id:"diaSemana-label",children:"Dia da Semana"}),e.jsxs(J,{labelId:"diaSemana-label",value:c.diaSemana,onChange:r=>D("diaSemana",r.target.value),children:[e.jsx(R,{value:"",children:e.jsx("em",{children:"Selecione"})}),[0,1,2,3,4,5,6].map(r=>e.jsx(R,{value:r,children:ve(r)},r))]})]})}),e.jsx(P,{size:4,children:e.jsx(j,{label:"Horário",type:"time",value:c.horario,onChange:r=>D("horario",r.target.value),fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{step:300}})}),e.jsx(P,{children:e.jsx(Le,{control:e.jsx(Be,{checked:c.ativo,onChange:r=>D("ativo",r.target.checked)}),label:"Ativo"})}),e.jsx(P,{children:e.jsxs(I,{display:"flex",justifyContent:"space-between",children:[e.jsx(_,{title:"Buscar",children:e.jsx(O,{color:"default",onClick:w,children:e.jsx(Fe,{})})}),e.jsx(_,{title:"Novo",children:e.jsx(O,{color:"primary",onClick:()=>n("/igrejaNovo"),children:e.jsx(Oe,{})})})]})})]})}),e.jsx(I,{display:"flex",children:g.show&&e.jsx(k,{errorMessage:g.mensagem,severity:g.severity})})]})},sa=({open:t,handleClose:o,igreja:a})=>{var d;return e.jsx($e,{open:t,onClose:o,children:e.jsxs(I,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2},children:[e.jsx(S,{variant:"h6",component:"h2",gutterBottom:!0,children:(a==null?void 0:a.nome)||"Detalhes da Igreja"}),(a==null?void 0:a.imagemUrl)&&e.jsx("img",{src:a.imagemUrl,alt:a.nome,style:{width:30,height:30,marginBottom:16}}),e.jsxs(S,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Paróco:"})," ",(a==null?void 0:a.paroco)||"Não informado"]}),e.jsxs(S,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Status:"})," ",a!=null&&a.ativo?"Ativo":"Inativo"]}),e.jsx(S,{variant:"body1",gutterBottom:!0,children:e.jsx("strong",{children:"Missas:"})}),e.jsx(K,{children:((d=a==null?void 0:a.missas)==null?void 0:d.length)>0?a.missas.map(n=>e.jsx(F,{children:e.jsx(Q,{primary:`Horário: ${n.horario}`,secondary:`Dia da Semana: ${ve(n.diaSemana)}, Observação: ${n.observacao||"N/A"}`})},n.id)):e.jsx(S,{variant:"body2",children:"Nenhuma missa cadastrada."})}),e.jsx(A,{variant:"contained",onClick:o,sx:{mt:2,display:"block",marginLeft:"auto",marginRight:"auto"},children:"Fechar"})]})})},ra=()=>{const[t,o]=l.useState([]),[a,d]=l.useState(!1),[n,h]=l.useState({}),[g,i]=l.useState({}),c=$(),v=()=>{const[r,E]=l.useState(!1);return{open:r,handleOpen:y=>{E(!0),i(y)},handleClose:()=>E(!1),igrejaModal:g}},{open:f,handleOpen:x,handleClose:p}=v(),z=r=>{o(r)},D=r=>{d(r)},w=r=>{h(r)};return e.jsxs(e.Fragment,{children:[e.jsx(sa,{open:f,handleClose:p,igreja:g}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Y,{}),e.jsxs(le,{component:de,style:{margin:"20px",padding:"20px"},children:[e.jsx(ta,{onDataChange:z,onLoadingChange:D,onPaginationChange:w}),a?e.jsxs(I,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#f5f5f5",children:[e.jsx(ce,{size:60}),e.jsx(S,{variant:"h6",mt:2,children:"Carregando..."})]}):e.jsxs(ue,{children:[e.jsx(he,{children:e.jsxs(B,{children:[e.jsx(m,{children:"ID"}),e.jsx(m,{children:"UF"}),e.jsx(m,{children:"Localidade"}),e.jsx(m,{children:"Nome"}),e.jsx(m,{children:"Paroco"}),e.jsx(m,{children:"Ativo"}),e.jsx(m,{children:"Ações"})]})}),e.jsx(xe,{children:t.items&&t.items.length>0?t.items.map(r=>e.jsxs(B,{children:[e.jsx(m,{children:r.id}),e.jsx(m,{children:r.endereco.uf}),e.jsx(m,{children:r.endereco.localidade}),e.jsx(m,{children:r.nome}),e.jsx(m,{children:r.paroco}),e.jsx(m,{children:r.ativo?"Sim":"Não"}),e.jsx(m,{children:e.jsxs(me,{direction:"row",spacing:1,children:[e.jsx(_,{title:"Detalhes",children:e.jsx(O,{color:"primary",onClick:()=>{x(r)},children:e.jsx(Ue,{})})}),e.jsx(_,{title:"Editar",children:e.jsx(O,{color:"primary",onClick:()=>c("/IgrejaEditar",{state:{row:r}}),children:e.jsx(qe,{})})})]})})]},r.id)):e.jsx(B,{children:e.jsx(m,{colSpan:5,align:"center",children:"Não há dados disponíveis."})})}),e.jsx(He,{children:e.jsx(B,{children:e.jsxs(m,{colSpan:7,align:"right",children:["Total de registros:"," ",t.items?t.items.length:0]})})})]}),e.jsx(fe,{...n})]})]})]})},oa=()=>{const[t,o]=l.useState([]),[a,d]=l.useState({}),[n,h]=l.useState(!0),g=i=>{switch(i){case 1:return e.jsxs("span",{children:["Admin ",e.jsx(Je,{})]});case 2:return e.jsxs("span",{children:["App ",e.jsx(Ge,{})]});case 3:return e.jsxs("span",{children:["Regular ",e.jsx(Ve,{})]});case 4:return e.jsxs("span",{children:["Dono ",e.jsx(Qe,{})]});default:return"Não existe"}};return l.useEffect(()=>{T.get("/api/Admin/usuario/buscar-por-filtro?Paginacao.PageIndex=1&Paginacao.PageSize=10").then(i=>{o(i.data.data.usuarios),d({pageIndex:i.data.data.usuarios.pageIndex,pageSize:i.data.data.usuarios.pageSize,totalItems:i.data.data.usuarios.totalItems,hasPreviousPage:i.data.data.usuarios.hasPreviousPage,hasNextPage:i.data.data.usuarios.hasNextPage,nextPage:i.data.data.usuarios.nextPage,previousPage:i.data.data.usuarios.previousPage,totalPages:i.data.data.usuarios.totalPages})}).catch(i=>{console.error("Error fetching data:",i)}).finally(()=>{h(!1)})},[]),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Y,{}),e.jsxs(le,{component:de,style:{margin:"20px",padding:"20px"},children:[n?e.jsxs(I,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#f5f5f5",children:[e.jsx(ce,{size:60}),e.jsx(S,{variant:"h6",mt:2,children:"Carregando..."})]}):e.jsxs(ue,{children:[e.jsx(he,{children:e.jsxs(B,{children:[e.jsx(m,{children:"ID"}),e.jsx(m,{children:"Nome"}),e.jsx(m,{children:"Perfil"}),e.jsx(m,{children:"Ativo"}),e.jsx(m,{children:"Ações"})]})}),e.jsx(xe,{children:t.items.map(i=>e.jsxs(B,{children:[e.jsx(m,{children:i.id}),e.jsx(m,{children:i.nome}),e.jsx(m,{children:g(i.perfil)}),e.jsx(m,{children:i.ativo?"Sim":"Não"}),e.jsx(m,{children:e.jsxs(me,{direction:"row",spacing:1,children:[e.jsx(A,{variant:"contained",color:"primary",size:"small",children:"Visualizar"}),e.jsx(A,{variant:"contained",color:"secondary",size:"small",children:"Editar"})]})})]},i.id))})]}),e.jsx(fe,{...a})]})]})},be=l.createContext(),na=({children:t})=>{const[o,a]=l.useState({}),d=()=>a({});return e.jsx(be.Provider,{value:{endereco:o,setEndereco:a,resetEndereco:d},children:t})},te=()=>{const t=l.useContext(be);if(!t)throw new Error("useEndereco deve ser usado dentro de um EnderecoProvider");return t},ia=()=>({mensagem:"",severity:""}),la=()=>{const[t,o]=l.useState(""),[a,d]=l.useState(""),{endereco:n,setEndereco:h,resetEndereco:g}=te(),[i,c]=l.useState(ia),v=()=>{if(!t||!aa(t)){c({mensagem:"CEP invalido ou vazio",severity:"error"}),g();return}T.get(`/api/Igreja/buscar-por-cep?cep=${t}`).then(f=>{var p;const x=(p=f.data)==null?void 0:p.data;x?(h(x.response.endereco),c({mensagem:"Tem igreja, redirecionar para editar!",severity:"error"})):c({mensagem:"Nenhum endereço encontrado para este CEP.",severity:"error"})}).catch(f=>{var p;const x=(p=f.response.data)==null?void 0:p.data;x.endereco.complemento=a,h(x.endereco),c({mensagem:"Não há igreja para este CEP, preencher os dados da igreja!",severity:"success"})})};return e.jsxs(I,{component:"form",display:"flex",flexDirection:"column",gap:2,sx:{margin:"0 auto",padding:2,border:"1px solid #ccc",borderRadius:2,width:"100%",boxSizing:"border-box"},children:[e.jsx(j,{label:"CEP",value:t,onChange:f=>o(f.target.value),fullWidth:!0,placeholder:"Digite o CEP"}),e.jsx(A,{variant:"contained",color:"primary",onClick:v,children:"Buscar CEP"}),e.jsxs(P,{container:!0,spacing:2,children:[e.jsx(P,{size:10,children:e.jsx(j,{disabled:!0,id:"outlined-disabled",value:n.logradouro,fullWidth:!0})}),e.jsx(P,{size:2,children:e.jsx(j,{label:"Número",id:"outlined-disabled",value:n.numero,fullWidth:!0})}),e.jsx(P,{size:6,children:e.jsx(j,{label:"Complemento",value:a,onChange:f=>d(f.target.value),fullWidth:!0,id:"outlined-disabled"})}),e.jsx(P,{size:6,children:e.jsx(j,{id:"outlined-basic",variant:"outlined",value:n.bairro,fullWidth:!0,disabled:!0})}),e.jsx(P,{size:4,children:e.jsx(j,{value:n.localidade,fullWidth:!0,disabled:!0})}),e.jsx(P,{size:4,children:e.jsx(j,{value:n.uf,fullWidth:!0,disabled:!0})}),e.jsx(P,{size:4,children:e.jsx(j,{value:n.estado,fullWidth:!0,disabled:!0})})]}),i&&e.jsx(k,{errorMessage:i.mensagem,severity:i.severity})]})},da=()=>{const[t,o]=l.useState(""),[a,d]=l.useState({nome:"",paroco:"",imagem:"",contato:{emailContato:"",ddd:"",telefone:"",dddWhatsApp:"",telefoneWhatsApp:""}}),[n,h]=l.useState({horario:"",diaSemana:"",observacao:""}),[g,i]=l.useState({tipoRedeSocial:"",nomeDoPerfil:""}),[c,v]=l.useState([]),[f,x]=l.useState([]),[p,z]=l.useState(""),[D,w]=l.useState(""),{endereco:r}=te(),E=$(),N=()=>{const{horario:s,diaSemana:u,observacao:C}=n;if(!s||u===""){o("Os campos Horário e Dia da Semana são obrigatórios!");return}v(W=>[...W,{horario:s,diaSemana:ae[u].value,observacao:C}]),h({horario:"",diaSemana:"",observacao:""})},b=()=>{const{tipoRedeSocial:s,nomeDoPerfil:u}=g;if(s===""||u===""){o("Os campos Tipo de Rede Social e Nome do Perfil são obrigatórios!");return}x(C=>[...C,{tipoRedeSocial:s,nomeDoPerfil:u}]),i({tipoRedeSocial:"",nomeDoPerfil:""})},y=(s,u)=>{d(C=>({...C,[s]:u}))},U=(s,u)=>{h(C=>({...C,[s]:u}))},se=(s,u)=>{i(C=>({...C,[s]:u}))},Se=s=>{v(u=>u.filter((C,W)=>W!==s))},ye=s=>{x(u=>u.filter((C,W)=>W!==s))},Ce=s=>{const u=s.target.files[0];if(u){const C=new FileReader;C.onload=W=>{const H=W.target.result.split(",")[1];z(H),w(u.name)},C.readAsDataURL(u)}},Pe=s=>{E(s)},Ie=()=>{var s=[];if(a.nome===""&&s.push("O campo Nome é obrigatório!"),c.length===0&&s.push("É necessário adicionar ao menos uma missa!"),r===void 0&&s.push("É necessário ter o endereço preenchido!"),s.length>0){o(s);return}a.missas=c,a.imagem=p,a.endereco=r,T.post("/api/Admin/igreja/criar",a).then(u=>{console.log(u),o("Igreja criada com sucesso!"),Pe("/igreja")}).catch(u=>{var H;var C=u.response.data;if(console.error("Erro ao criar a igreja:",u),C.errors)o(C.errors);else{var W=[(H=u.response.data.data)==null?void 0:H.messagemAplicacao];o(W)}})};return e.jsxs(e.Fragment,{children:[e.jsx("h4",{children:"Igreja"}),e.jsxs(I,{component:"form",display:"flex",flexDirection:"column",gap:2,sx:{margin:"0 auto",padding:2,border:"1px solid #ccc",borderRadius:2,width:"100%",boxSizing:"border-box"},children:[e.jsx(j,{label:"Nome da Igreja",value:a.nome,onChange:s=>y("nome",s.target.value),fullWidth:!0,required:!0}),e.jsx(j,{label:"Pároco",value:a.paroco,onChange:s=>y("paroco",s.target.value),fullWidth:!0}),e.jsxs(I,{sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:500,margin:"0 auto",padding:2,border:"1px solid #ccc",borderRadius:2},children:[e.jsx(S,{variant:"h6",children:"Upload de Imagem e Conversão para Base64"}),e.jsxs(A,{variant:"outlined",component:"label",children:["Selecionar Imagem",e.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:Ce})]}),D&&e.jsxs(S,{children:["Arquivo selecionado: ",D]}),e.jsx(j,{label:"Base64 da Imagem",value:p,multiline:!0,rows:4,InputProps:{readOnly:!0},fullWidth:!0,disabled:!0}),p&&e.jsx(I,{component:"img",src:`data:image/png;base64,${p}`,alt:"Preview",sx:{maxWidth:"100%",border:"1px solid #ccc",borderRadius:1}})]}),e.jsxs(I,{display:"flex",gap:2,flexDirection:"column",sx:{width:"80%",margin:"0 auto",padding:2},children:[e.jsx(S,{children:"Adicionar Missa"}),e.jsx(j,{label:"Horário",type:"time",value:n.horario,onChange:s=>U("horario",s.target.value),fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{step:900}}),e.jsx(j,{label:"Dia da Semana",select:!0,value:n.diaSemana,onChange:s=>U("diaSemana",s.target.value),fullWidth:!0,children:ae.map(s=>e.jsx(R,{value:s.value,children:s.label},s.value))}),e.jsx(j,{label:"Observação",value:n.observacao,onChange:s=>U("observacao",s.target.value),fullWidth:!0}),e.jsx(A,{variant:"text",color:"primary",onClick:N,children:"Adicionar Missa"}),c.length>0&&e.jsx(K,{children:c.map((s,u)=>e.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(S,{children:[s.horario," - ",ae[s.diaSemana].label," (",s.observacao||"Sem observação",")"]}),e.jsx(O,{color:"error",onClick:()=>Se(u),children:e.jsx(ne,{})})]},u))})]}),e.jsx(j,{label:"Email de Contato",value:a.contato.emailContato,onChange:s=>y("contato",{...a.contato,emailContato:s.target.value}),fullWidth:!0}),e.jsx(j,{label:"DDD",value:a.contato.ddd,onChange:s=>y("contato",{...a.contato,ddd:s.target.value}),fullWidth:!0}),e.jsx(j,{label:"Telefone",value:a.contato.telefone,onChange:s=>y("contato",{...a.contato,telefone:s.target.value}),fullWidth:!0}),e.jsx(j,{label:"DDD WhatsApp",value:a.contato.dddWhatsApp,onChange:s=>y("contato",{...a.contato,dddWhatsApp:s.target.value}),fullWidth:!0}),e.jsx(j,{label:"Telefone WhatsApp",value:a.contato.telefoneWhatsApp,onChange:s=>y("contato",{...a.contato,telefoneWhatsApp:s.target.value}),fullWidth:!0}),e.jsxs(I,{display:"flex",gap:2,flexDirection:"column",sx:{width:"80%",margin:"0 auto",padding:2},children:[e.jsxs(V,{fullWidth:!0,children:[e.jsx(G,{id:"tipoRedeSocial-label",children:"Tipo de Rede Social"}),e.jsxs(J,{labelId:"tipoRedeSocial-label",value:g.tipoRedeSocial,onChange:s=>se("tipoRedeSocial",s.target.value),children:[e.jsx(R,{value:1,children:"Facebook"}),e.jsx(R,{value:2,children:"Instagram"}),e.jsx(R,{value:3,children:"Twitter"}),e.jsx(R,{value:4,children:"LinkedIn"})]})]}),e.jsx(j,{label:"Nome do Perfil",value:g.nomeDoPerfil,onChange:s=>se("nomeDoPerfil",s.target.value),fullWidth:!0}),e.jsx(A,{variant:"text",color:"primary",onClick:b,children:"Adicionar Rede Social"}),f.length>0&&e.jsx(K,{children:f.map((s,u)=>e.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(S,{children:[s.tipoRedeSocial," - ",s.nomeDoPerfil]}),e.jsx(O,{color:"error",onClick:()=>ye(u),children:e.jsx(ne,{})})]},u))})]}),e.jsx(A,{variant:"contained",color:"primary",onClick:Ie,children:"Criar Igreja"}),Object.keys(t).length>0&&e.jsxs("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Erros de Validação:"}),e.jsx("ul",{className:"list-disc ml-5",children:Object.entries(t).map(([s,u])=>e.jsx(k,{errorMessage:u,field:s,severity:"error"}))})]})]})]})},ca=()=>e.jsx(na,{children:e.jsxs("div",{style:{display:"flex"},children:[e.jsx(Y,{}),e.jsxs(I,{sx:{display:"flex",flexDirection:"column",gap:2,width:"100%",padding:2},children:[e.jsx(la,{}),e.jsx(da,{})]})]})}),ua=({igreja:t})=>{var y;const[o,a]=l.useState(""),[d,n]=l.useState({nome:"",paroco:"",imagem:"",contato:{emailContato:"",ddd:"",telefone:"",dddWhatsApp:"",telefoneWhatsApp:""}}),[h,g]=l.useState({horario:"",diaSemana:"",observacao:""}),[i,c]=l.useState({tipoRedeSocial:"",nomeDoPerfil:""}),[v,f]=l.useState([]),[x,p]=l.useState([]),[z,D]=l.useState(""),[w,r]=l.useState(""),{endereco:E}=te();$();const b=(y=Ke().state)==null?void 0:y.row;console.log(t),console.log(b)},q=({children:t,isAuthenticated:o})=>o?t:e.jsx(ge,{to:"/"}),ha=()=>{const{isAuthenticated:t}=X();return e.jsx(Ee,{children:e.jsxs(_e,{children:[e.jsx(L,{path:"/",element:e.jsx(Ye,{})}),e.jsx(L,{path:"/home",element:e.jsx(q,{isAuthenticated:t,children:e.jsx(Ze,{})})}),e.jsx(L,{path:"/igreja",element:e.jsx(q,{isAuthenticated:t,children:e.jsx(ra,{})})}),e.jsx(L,{path:"/usuario",element:e.jsx(q,{isAuthenticated:t,children:e.jsx(oa,{})})}),e.jsx(L,{path:"/igrejaNovo",element:e.jsx(q,{isAuthenticated:t,children:e.jsx(ca,{})})}),e.jsx(L,{path:"/igrejaEditar",element:e.jsx(q,{isAuthenticated:t,children:e.jsx(ua,{})})})]})})};De.createRoot(document.getElementById("root")).render(e.jsx(Xe,{children:e.jsx(l.StrictMode,{children:e.jsx(ha,{})})}));
